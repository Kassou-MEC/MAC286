<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadratic Probing Hash Tables – Interactive Presentation</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#ff6b6b 0%,#feca57 100%);min-height:100vh;color:#333;overflow-x:hidden}
        .presentation-container{max-width:1200px;margin:0 auto;padding:20px;min-height:100vh;display:flex;flex-direction:column}
        .scroll-indicator{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(255,107,107,.8);color:#fff;padding:5px 15px;border-radius:20px;font-size:12px;opacity:0;transition:opacity .3s;pointer-events:none;z-index:10}
        .scroll-indicator.show{opacity:1}
        .slide{background:#fff;border-radius:15px;padding:40px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,.2);opacity:0;transform:translateY(30px);transition:all .6s;min-height:calc(100vh - 100px);max-height:calc(100vh - 100px);overflow-y:auto;display:none;position:relative}
        .slide.active{opacity:1;transform:translateY(0);display:block}
        .slide::-webkit-scrollbar{width:8px}
        .slide::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}
        .slide::-webkit-scrollbar-thumb{background:#ff6b6b;border-radius:4px}
        .slide::-webkit-scrollbar-thumb:hover{background:#ee5a52}
        h1{font-size:2.5em;color:#2c3e50;text-align:center;margin-bottom:30px;background:linear-gradient(45deg,#ff6b6b,#feca57);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        h2{font-size:2em;color:#34495e;margin-bottom:20px;border-bottom:3px solid #ff6b6b;padding-bottom:10px}
        h3{font-size:1.5em;color:#e74c3c;margin:20px 0 15px}
        .definition-box{background:linear-gradient(135deg,#ff9ff3,#f368e0);color:#fff;padding:25px;border-radius:10px;margin:20px 0;border-left:5px solid #ff6b6b}
        .real-life-example{background:linear-gradient(135deg,#feca57,#ff9ff3);color:#2c3e50;padding:25px;border-radius:10px;margin:20px 0;position:relative;overflow:hidden}
        .real-life-example::before{content:'Restaurant';position:absolute;top:10px;right:15px;font-size:2em;opacity:.3}
        .hash-table-visual{display:flex;justify-content:center;margin:30px 0;flex-wrap:wrap;gap:10px}
        .hash-slot{width:80px;height:60px;border:2px solid #ff6b6b;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff3cd;transition:all .3s;position:relative;font-size:0.9em}
        .hash-slot.occupied{background:linear-gradient(135deg,#feca57,#ff6b6b);color:#fff;font-weight:bold}
        .hash-slot.collision{background:linear-gradient(135deg,#ee5a52,#c0392b);color:#fff;animation:pulse 1s infinite}
        .hash-slot .index{font-size:.7em;color:#7f8c8d;position:absolute;top:2px;left:5px}
        .hash-slot.occupied .index{color:rgba(255,255,255,.7)}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        .code-container{background:#2c3e50;color:#ecf0f1;padding:25px;border-radius:10px;margin:20px 0;font-family:'Courier New',monospace;font-size:14px;line-height:1.6;overflow-x:auto;position:relative}
        .code-container::before{content:'Java Code';position:absolute;top:5px;right:15px;background:#e74c3c;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8em}
        .copy-btn{position:absolute;top:5px;right:100px;background:#27ae60;color:#fff;padding:5px 10px;border:none;border-radius:4px;font-size:12px;cursor:pointer}
        .copy-btn:hover{background:#1e8449}
        .keyword{color:#e74c3c;font-weight:bold}
        .string{color:#2ecc71}
        .comment{color:#95a5a6;font-style:italic}
        .method{color:#f39c12}
        .interactive-demo{background:#fff8e1;padding:25px;border-radius:10px;margin:20px 0;border:2px dashed #ff6b6b}
        .demo-controls{display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap}
        .demo-input{padding:10px;border:2px solid #bdc3c7;border-radius:5px;font-size:16px;outline:none;transition:border-color .3s}
        .demo-input:focus{border-color:#ff6b6b}
        .demo-button{background:linear-gradient(135deg,#feca57,#ff6b6b);color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:16px;font-weight:bold;transition:transform .2s}
        .demo-button:hover{transform:translateY(-2px)}
        .demo-button:active{transform:translateY(0)}
        .step-log{background:#2c3e50;color:#ecf0f1;padding:15px;border-radius:8px;margin-top:15px;font-family:'Courier New',monospace;font-size:13px;max-height:200px;overflow-y:auto}
        .navigation{position:fixed;bottom:30px;right:30px;display:flex;gap:15px;z-index:1000}
        .nav-button{background:#ff6b6b;color:#fff;border:none;padding:15px 20px;border-radius:50px;cursor:pointer;font-size:18px;font-weight:bold;transition:all .3s;box-shadow:0 4px 15px rgba(255,107,107,.4);min-width:50px;min-height:50px;display:flex;align-items:center;justify-content:center}
        .nav-button:hover{background:#ee5a52;transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,.6)}
        .nav-button:active{transform:translateY(0)}
        .nav-button:disabled{opacity:.5;cursor:not-allowed;transform:none!important}
        .progress-bar{position:fixed;top:0;left:0;height:4px;background:linear-gradient(90deg,#ff6b6b,#feca57);transition:width .3s;z-index:1000}
        .advantages-disadvantages{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:20px 0}
        .advantage{background:linear-gradient(135deg,#55efc4,#00b894);color:#fff;padding:20px;border-radius:10px;position:relative}
        .advantage::before{content:'Check';position:absolute;top:10px;right:15px;font-size:1.5em;font-weight:bold}
        .disadvantage{background:linear-gradient(135deg,#fdcb6e,#e17055);color:#fff;padding:20px;border-radius:10px;position:relative}
        .disadvantage::before{content:'Cross';position:absolute;top:10px;right:15px;font-size:1.5em}
        .complexity-table{width:100%;border-collapse:collapse;margin:20px 0;background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1)}
        .complexity-table th,.complexity-table td{padding:15px;text-align:left;border-bottom:1px solid #f1f1f1}
        .complexity-table th{background:linear-gradient(135deg,#ff6b6b,#feca57);color:#fff;font-weight:bold}
        .complexity-table tr:nth-child(even){background:#fff8e1}
        @media(max-width:768px){
            .presentation-container{padding:10px}
            .slide{padding:20px}
            h1{font-size:2em}
            h2{font-size:1.5em}
            .advantages-disadvantages{grid-template-columns:1fr}
            .demo-controls{flex-direction:column}
        }
        .probe-path{fill:none;stroke:#e74c3c;stroke-width:3;stroke-dasharray:5,5;animation:dash 2s linear infinite}
        @keyframes dash{to{stroke-dashoffset:-10}}
        .highlight-animation{animation:highlight 2s ease-in-out}
        @keyframes highlight{0%,100%{background-color:transparent}50%{background-color:rgba(255,107,107,.3)}}
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>

    <div class="presentation-container">

        <!-- ==================== SLIDE 1 – Title ==================== -->
        <div class="slide active">
            <h1>Quadratic Probing Hash Tables</h1>
            <div style="text-align:center;font-size:1.2em;color:#7f8c8d;margin:30px 0">
                <p>A Modern Collision Resolution Strategy</p>
                <p style="margin-top:20px;font-size:.9em">Avoiding clustering with quadratic jumps</p>
            </div>
            <div style="text-align:center;margin-top:40px">
                <div style="display:inline-block;background:linear-gradient(135deg,#feca57,#ff6b6b);padding:20px 40px;border-radius:50px;color:#fff;font-size:1.1em">
                    Click <strong>Next</strong> to Begin!
                </div>
            </div>
        </div>

        <!-- ==================== SLIDE 2 – Definition ==================== -->
        <div class="slide">
            <h2>What is Quadratic Probing?</h2>
            <div class="definition-box">
                <h3 style="color:#fff;margin-top:0">Core Idea:</h3>
                <p style="font-size:1.2em;line-height:1.6">
                    Instead of checking the <em>next</em> slot on collision, jump by <strong>i²</strong> (i=1,2,3...):<br>
                    <code style="background:#fff3; color:#e74c3c; padding:2px 6px; border-radius:4px;">index = (hash + i²) % capacity</code>
                </p>
            </div>
            <h3>Why Quadratic?</h3>
            <ul style="font-size:1.1em;line-height:1.8;margin:20px 0;padding-left:30px">
                <li>Breaks <strong>primary clustering</strong> from linear probing</li>
                <li>Keys spread out more evenly</li>
                <li>Still simple to implement</li>
            </ul>
            <div class="scroll-indicator">Scroll down for more</div>
        </div>

        <!-- ==================== SLIDE 3 – Real-Life: Restaurant Seating ==================== -->
        <div class="slide">
            <h2>Real-Life Example: Restaurant Tables</h2>
            <div class="real-life-example">
                <h3 style="color:#2c3e50;margin-top:0">Restaurant Seating Strategy</h3>
                <p style="font-size:1.1em;line-height:1.7;">
                    You're a host at a busy restaurant. A party of 4 says: <strong>"We prefer table 5!"</strong>
                </p>
                <br>
                <p style="font-size:1.1em;line-height:1.7;">
                    <strong>Quadratic Strategy:</strong><br>
                    1. Table 5 taken → Try <code>5 + 1² = 6</code><br>
                    2. Table 6 taken → Try <code>5 + 2² = 9</code><br>
                    3. Table 9 taken → Try <code>5 + 3² = 14</code><br>
                    4. Table 14 free → Seat them!
                </p>
            </div>
            <div style="background:#fff8e1;padding:20px;border-radius:10px;margin-top:20px;">
                <h3>Visual Path:</h3>
                <div style="font-family:'Courier New',monospace;background:#fff;padding:15px;border-radius:8px;margin-top:10px;">
                    Table 5 [X] → 6 [X] → 9 [X] → 14 [Check] → Sit here!
                </div>
            </div>
        </div>

        <!-- ==================== SLIDE 4 – Visual Animation ==================== -->
        <div class="slide">
            <h2>Visual Animation</h2>
            <div class="hash-table-visual" id="visualDemo"></div>
            <div style="text-align:center;margin-top:20px">
                <button class="demo-button" onclick="startVisualDemo()">Start Animation</button>
                <button class="demo-button" onclick="resetVisualDemo()" style="margin-left:10px;background:linear-gradient(135deg,#e74c3c,#c0392b)">Reset</button>
            </div>
            <div id="visualSteps" style="margin-top:20px;padding:15px;background:#2c3e50;color:#ecf0f1;border-radius:8px;font-family:'Courier New',monospace;font-size:13px">
                Click “Start Animation” to see quadratic jumps!
            </div>
        </div>

        <!-- ==================== SLIDE 5 – Interactive Demo ==================== -->
        <div class="slide">
            <h2>Interactive Demo</h2>
            <div class="interactive-demo">
                <div class="demo-controls">
                    <input type="text" id="demoKey" class="demo-input" placeholder="Key (e.g. apple)">
                    <input type="number" id="demoValue" class="demo-input" placeholder="Value (number)">
                    <button class="demo-button" onclick="insertDemo()">Insert</button>
                    <button class="demo-button" onclick="searchDemo()">Search</button>
                    <button class="demo-button" onclick="clearDemo()" style="background:linear-gradient(135deg,#e74c3c,#c0392b)">Clear</button>
                </div>
                <div class="hash-table-visual" id="interactiveTable"></div>
                <div id="interactiveLog" class="step-log">Ready – try inserting "apple", "banana", etc.</div>
            </div>
        </div>

        <!-- ==================== SLIDE 6 – Java Code (FULLY WORKING) ==================== -->
        <div class="slide">
            <h2>Java Implementation</h2>
            <p style="margin-bottom:20px">Complete, <strong>runnable</strong> demo with <strong>quadratic probing</strong>. Click <strong>Copy</strong> and run in <a href="https://www.jdoodle.com/online-java-compiler/" target="_blank" style="color:#ff6b6b">JDoodle</a>.</p>
            <div class="code-container" style="position:relative">
                <button class="copy-btn" onclick="copyJavaCode()">Copy Code</button>
<pre id="javaCode"><code><span class="comment">// ============================================================================
// QUADRATIC PROBING - Simple Classroom Demo (50 lines)
// Real-life: Restaurant - if table 5 taken, try table 6(5+1²), 9(5+2²), 14(5+3²)...
// ============================================================================</span>

<span class="keyword">public class</span> QuadraticProbingSimple {
    <span class="keyword">private</span> String[] keys;
    <span class="keyword">private</span> Integer[] values;
    <span class="keyword">private int</span> capacity;
    
    <span class="keyword">public</span> <span class="method">QuadraticProbingSimple</span>(<span class="keyword">int</span> capacity) {
        <span class="keyword">this</span>.capacity = capacity;
        <span class="keyword">this</span>.keys = <span class="keyword">new</span> String[capacity];
        <span class="keyword">this</span>.values = <span class="keyword">new</span> Integer[capacity];
    }
    
    <span class="keyword">private int</span> <span class="method">hash</span>(String key) {
        <span class="keyword">return</span> Math.abs(key.hashCode()) % capacity;
    }
    
    <span class="keyword">public void</span> <span class="method">put</span>(String key, Integer value) {
        <span class="keyword">int</span> originalHash = hash(key);
        <span class="keyword">int</span> index = originalHash;
        <span class="keyword">int</span> i = 0;
        
        System.out.println(<span class="string">"Inserting "</span> + key + <span class="string">" → hash="</span> + originalHash);
        
        <span class="comment">// Quadratic probing: h(k) + i²</span>
        <span class="keyword">while</span> (keys[index] != <span class="keyword">null</span> && !keys[index].equals(key)) {
            i++;
            index = (originalHash + i * i) % capacity;
            System.out.println(<span class="string">"  Collision! Trying "</span> + originalHash + <span class="string">"+"</span> + (i*i) + <span class="string">" = "</span> + index);
        }
        
        keys[index] = key;
        values[index] = value;
        System.out.println(<span class="string">"  Stored at index "</span> + index + <span class="string">"\n"</span>);
    }
    
    <span class="keyword">public</span> Integer <span class="method">get</span>(String key) {
        <span class="keyword">int</span> originalHash = hash(key);
        <span class="keyword">int</span> index = originalHash;
        <span class="keyword">int</span> i = 0;
        
        <span class="comment">// Search up to capacity times</span>
        <span class="keyword">while</span> (i < capacity) {
            <span class="keyword">if</span> (keys[index] == <span class="keyword">null</span>) <span class="keyword">return null</span>;
            <span class="keyword">if</span> (keys[index].equals(key)) <span class="keyword">return</span> values[index];
            
            i++;
            index = (originalHash + i * i) % capacity;
        }
        <span class="keyword">return null</span>;
    }
    
    <span class="keyword">public void</span> <span class="method">display</span>() {
        System.out.println(<span class="string">"=== Quadratic Probing Hash Table ==="</span>);
        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i < capacity; i++) {
            <span class="keyword">if</span> (keys[i] == <span class="keyword">null</span>) {
                System.out.println(i + <span class="string">": [EMPTY]"</span>);
            } <span class="keyword">else</span> {
                System.out.println(i + <span class="string">": "</span> + keys[i] + <span class="string">"="</span> + values[i]);
            }
        }
        System.out.println();
    }
    
    <span class="keyword">public static void</span> <span class="method">main</span>(String[] args) {
        System.out.println(<span class="string">"QUADRATIC PROBING DEMO"</span>);
        System.out.println(<span class="string">"Concept: If collision, try h+1², h+2², h+3²...\n"</span>);
        
        QuadraticProbingSimple table = <span class="keyword">new</span> QuadraticProbingSimple(11);
        
        table.put(<span class="string">"apple"</span>, 10);
        table.put(<span class="string">"banana"</span>, 20);
        table.put(<span class="string">"cherry"</span>, 30);
        
        table.display();
        
        System.out.println(<span class="string">"Finding 'banana': "</span> + table.get(<span class="string">"banana"</span>));
        
        System.out.println(<span class="string">"\nAdvantage: Reduces clustering vs linear"</span>);
        System.out.println(<span class="string">"Problem: May not find empty slots if table > 50% full"</span>);
    }
}</code></pre>
            </div>
            <div class="scroll-indicator">Scroll to copy</div>
        </div>

        <!-- ==================== SLIDE 7 – Code Explanation ==================== -->
        <div class="slide">
            <h2>Code Walkthrough</h2>
            <div style="background:#fff8e1;padding:20px;border-radius:10px;margin:20px 0">
                <h3>Key Lines Explained</h3>
                <ul style="line-height:1.8;font-size:1.1em">
                    <li><code>index = (originalHash + i * i) % capacity</code> → Quadratic jump</li>
                    <li><code>i++</code> → Try next quadratic offset</li>
                    <li><code>while (i < capacity)</code> → Prevent infinite loop</li>
                    <li><code>display()</code> → Shows final table layout</li>
                </ul>
            </div>
            <h3>Output Example:</h3>
            <div style="font-family:'Courier New',monospace;background:#2c3e50;color:#ecf0f1;padding:15px;border-radius:8px">
                Inserting apple → hash=5<br>
                Stored at index 5<br><br>
                Inserting banana → hash=5<br>
                Collision! Trying 5+1 = 6<br>
                Stored at index 6
            </div>
        </div>

        <!-- ==================== SLIDE 8 – Advantages / Disadvantages ==================== -->
        <div class="slide">
            <h2>Advantages & Disadvantages</h2>
            <div class="advantages-disadvantages">
                <div class="advantage">
                    <h3>Advantages</h3>
                    <ul style="margin-top:15px;line-height:1.6">
                        <li><strong>No primary clustering</strong></li>
                        <li><strong>Better cache performance</strong> than chaining</li>
                        <li><strong>Simple math</strong></li>
                    </ul>
                </div>
                <div class="disadvantage">
                    <h3>Disadvantages</h3>
                    <ul style="margin-top:15px;line-height:1.6">
                        <li><strong>Secondary clustering</strong> (same hash → same path)</li>
                        <li><strong>Table must be < 50% full</strong></li>
                        <li><strong>Deletion requires tombstoning</strong></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ==================== SLIDE 9 – Time Complexity ==================== -->
        <div class="slide">
            <h2>Time Complexity</h2>
            <table class="complexity-table">
                <thead><tr><th>Operation</th><th>Best</th><th>Avg</th><th>Worst</th><th>Notes</th></tr></thead>
                <tbody>
                    <tr><td><strong>Insert</strong></td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>at high load</td></tr>
                    <tr><td><strong>Search</strong></td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>long probe</td></tr>
                    <tr><td><strong>Delete</strong></td><td>O(1)</td><td>O(1)</td><td>O(n)</td><td>needs tombstone</td></tr>
                </tbody>
            </table>
            <div style="background:#fff8e1;padding:20px;border-radius:10px;margin-top:20px">
                <p><strong>Load Factor Rule:</strong> Keep <code>α ≤ 0.5</code> for good performance</p>
            </div>
        </div>

        <!-- ==================== SLIDE 10 – Summary ==================== -->
        <div class="slide">
            <h2>Summary</h2>
            <div style="background:linear-gradient(135deg,#feca57,#ff6b6b);color:#fff;padding:25px;border-radius:10px">
                <h3 style="color:#fff;margin-top:0">Key Takeaways</h3>
                <ul style="font-size:1.1em;line-height:1.8;margin-top:15px">
                    <li>Quadratic probing uses <code>i²</code> jumps</li>
                    <li>Eliminates <strong>primary clustering</strong></li>
                    <li>Real-world: restaurant seating, parking with zones</li>
                    <li>Best when table is <strong>≤ 50% full</strong></li>
                </ul>
            </div>
            <div style="text-align:center;margin-top:30px">
                <div style="display:inline-block;background:linear-gradient(135deg,#55efc4,#00b894);padding:20px 40px;border-radius:50px;color:#fff;font-size:1.2em;font-weight:bold">
                    You’ve Mastered Quadratic Probing!
                </div>
            </div>
        </div>

    </div>

    <!-- ==================== NAVIGATION ==================== -->
    <div class="navigation">
        <button class="nav-button" id="prevBtn" onclick="previousSlide()">Prev</button>
        <div id="slideCounter" style="background:rgba(44,62,80,.9);color:#fff;padding:15px 20px;border-radius:50px;display:flex;align-items:center;font-weight:bold;box-shadow:0 4px 15px rgba(44,62,80,.4)">
            1 / 10
        </div>
        <button class="nav-button" id="nextBtn" onclick="nextSlide()">Next</button>
    </div>

    <script>
        /* ---------- GLOBAL STATE ---------- */
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        let currentSlide = 0;

        const demoTable = {
            capacity: 11,
            keys: Array(11).fill(null),
            values: Array(11).fill(null)
        };

        /* ---------- COPY JAVA CODE ---------- */
        function copyJavaCode() {
            const code = document.getElementById('javaCode').innerText;
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.querySelector('.copy-btn');
                const original = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#27ae60';
                setTimeout(() => {
                    btn.textContent = original;
                    btn.style.background = '';
                }, 2000);
            });
        }

        /* ---------- UI HELPERS ---------- */
        function updateProgress() {
            const pct = ((currentSlide + 1) / totalSlides) * 100;
            document.getElementById('progressBar').style.width = pct + '%';
        }

        function showSlide(n) {
            slides[currentSlide].classList.remove('active');
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');
            updateProgress();
            document.getElementById('slideCounter').textContent = `${currentSlide+1} / ${totalSlides}`;

            const prev = document.getElementById('prevBtn');
            const next = document.getElementById('nextBtn');
            prev.disabled = currentSlide === 0;
            next.disabled = currentSlide === totalSlides - 1;

            setTimeout(() => {
                const active = document.querySelector('.slide.active');
                const ind = active.querySelector('.scroll-indicator');
                if (ind && active.scrollHeight > active.clientHeight) ind.classList.add('show');
            }, 150);
        }

        function nextSlide() { 
            if (currentSlide < totalSlides - 1) showSlide(currentSlide + 1); 
        }
        function previousSlide() { 
            if (currentSlide > 0) showSlide(currentSlide - 1); 
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') nextSlide();
            if (e.key === 'ArrowLeft') previousSlide();
        });

        /* ---------- HASH FUNCTION (demo) ---------- */
        function demoHash(key) {
            let h = 0;
            for (let i = 0; i < key.length; i++) {
                h = ((h << 5) - h) + key.charCodeAt(i);
                h = h & h;
            }
            return Math.abs(h) % demoTable.capacity;
        }

        /* ---------- VISUAL DEMO ---------- */
        function initVisualTable(id) {
            const cont = document.getElementById(id);
            cont.innerHTML = '';
            for (let i = 0; i < demoTable.capacity; i++) {
                const slot = document.createElement('div');
                slot.className = 'hash-slot';
                slot.innerHTML = `<div class="index">${i}</div><div>Empty</div>`;
                cont.appendChild(slot);
            }
        }

        function startVisualDemo() {
            resetVisualDemo();
            const stepsDiv = document.getElementById('visualSteps');
            const slots = document.querySelectorAll('#visualDemo .hash-slot');
            const data = [{key:'apple',val:10},{key:'banana',val:20},{key:'cherry',val:30}];
            let i = 0;

            function animate() {
                if (i >= data.length) {
                    stepsDiv.innerHTML = 'Animation complete! Notice the quadratic jumps.';
                    return;
                }
                const {key,val} = data[i];
                const start = demoHash(key);
                let pos = start;
                let probe = 0;
                stepsDiv.innerHTML = `Inserting "${key}" → hash = ${start}`;

                while (demoTable.keys[pos] !== null && probe < demoTable.capacity) {
                    probe++;
                    pos = (start + probe * probe) % demoTable.capacity;
                }

                let current = start;
                let step = 0;
                const highlight = () => {
                    if (step < probe) {
                        slots[current].classList.add('collision');
                        setTimeout(() => {
                            slots[current].classList.remove('collision');
                            step++;
                            current = (start + step * step) % demoTable.capacity;
                            if (step < probe) highlight();
                            else finalize();
                        }, 800);
                    } else finalize();
                };

                const finalize = () => {
                    demoTable.keys[pos] = key;
                    demoTable.values[pos] = val;
                    slots[pos].classList.add('occupied');
                    slots[pos].innerHTML = `<div class="index">${pos}</div><div>${key}=${val}</div>`;
                    stepsDiv.innerHTML += `<br>Probed: ${probe > 0 ? probe + ' steps → ' : ''}Stored at ${pos}`;
                    i++;
                    setTimeout(animate, 1500);
                };

                if (probe === 0) finalize();
                else highlight();
            }
            animate();
        }

        function resetVisualDemo() {
            demoTable.keys.fill(null);
            demoTable.values.fill(null);
            initVisualTable('visualDemo');
            document.getElementById('visualSteps').innerHTML = 'Click “Start Animation” to watch quadratic probing.';
        }

        /* ---------- INTERACTIVE DEMO ---------- */
        function initInteractiveTable() { initVisualTable('interactiveTable'); }
        function updateInteractiveTable() {
            const slots = document.querySelectorAll('#interactiveTable .hash-slot');
            slots.forEach((s, i) => {
                s.className = 'hash-slot';
                if (demoTable.keys[i] !== null) {
                    s.classList.add('occupied');
                    s.innerHTML = `<div class="index">${i}</div><div>${demoTable.keys[i]}=${demoTable.values[i]}</div>`;
                } else {
                    s.innerHTML = `<div class="index">${i}</div><div>Empty</div>`;
                }
            });
        }

        function insertDemo() {
            const key = document.getElementById('demoKey').value.trim();
            const val = parseInt(document.getElementById('demoValue').value);
            const log = document.getElementById('interactiveLog');
            if (!key || isNaN(val)) { log.textContent='Enter key & number'; return; }

            let idx = demoHash(key);
            let i = 0;
            const steps = [`Insert "${key}" → hash=${idx}`];
            while (demoTable.keys[idx] !== null && demoTable.keys[idx] !== key && i < demoTable.capacity) {
                i++;
                idx = (demoHash(key) + i * i) % demoTable.capacity;
                steps.push(`Collision → try ${i}² = ${idx}`);
            }
            demoTable.keys[idx] = key;
            demoTable.values[idx] = val;
            steps.push(`Stored @${idx}`);
            updateInteractiveTable();
            log.innerHTML = steps.join('<br>');
            document.getElementById('demoKey').value = '';
            document.getElementById('demoValue').value = '';
        }

        function searchDemo() {
            const key = document.getElementById('demoKey').value.trim();
            const log = document.getElementById('interactiveLog');
            if (!key) { log.textContent='Enter a key'; return; }

            let idx = demoHash(key);
            let i = 0;
            const steps = [`Search "${key}" → hash=${idx}`];
            while (i < demoTable.capacity) {
                if (demoTable.keys[idx] === null) {
                    steps.push(`Empty slot → not found`);
                    break;
                }
                if (demoTable.keys[idx] === key) {
                    steps.push(`Found @${idx} = ${demoTable.values[idx]}`);
                    log.innerHTML = steps.join('<br>');
                    highlightSlot(idx, '#interactiveTable');
                    return;
                }
                i++;
                idx = (demoHash(key) + i * i) % demoTable.capacity;
                steps.push(`Check ${idx}...`);
            }
            log.innerHTML = steps.join('<br>');
        }

        function clearDemo() {
            demoTable.keys.fill(null);
            demoTable.values.fill(null);
            updateInteractiveTable();
            document.getElementById('interactiveLog').textContent = 'Table cleared!';
        }

        function highlightSlot(idx, container) {
            const slot = document.querySelectorAll(`${container} .hash-slot`)[idx];
            slot.classList.add('highlight-animation');
            setTimeout(() => slot.classList.remove('highlight-animation'), 2000);
        }

        /* ---------- INITIALISATION ---------- */
        initVisualTable('visualDemo');
        initInteractiveTable();
        updateProgress();
        showSlide(0);
    </script>
</body>
</html>